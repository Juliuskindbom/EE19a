!function(e){function t(t){for(var a,c,l=t[0],i=t[1],u=t[2],s=0,p=[];s<l.length;s++)c=l[s],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&p.push(r[c][0]),r[c]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(d&&d(t);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,l=1;l<n.length;l++){var i=n[l];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={21:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(){return Promise.resolve()},c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/media/";var l=window.webpackJsonp=window.webpackJsonp||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=i;o.push([666,0]),n()}({666:function(e,t,n){"use strict";n.r(t);var a,r,o=n(2),c=n.n(o),l=n(1),i=n.n(l),u=n(3),d=(n(61),n(14)),s=n.n(d),p=n(5),f=n(40),h=n(0),b=n(48),v=n(42),w=BASE_URL+"xhr/validate",g=new MutationObserver((function(e){i()(e).call(e,(function(e){if(e.addedNodes.length){var t=e.addedNodes[0].querySelectorAll('iframe[title*="recaptcha"]');t.length&&(g.disconnect(),i()(t).call(t,(function(e){s()((function(){var t,n=null==(t=e.parentNode)?void 0:t.parentNode,a="invisible";"visible"==(null==n?void 0:n.style.visibility)&&(a="manual"),b.a.send("ga","send","event",a)}),1500)})))}}))})),m=function(){var e=Object(u.a)(c.a.mark((function e(t,n,o){var l,i,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),n.stopPropagation(),(r=o).button=t,l=t.getAttribute("href"),(a=document.createElement("a")).href=l,"External"!==r.fileLicense){e.next=11;break}return r.callbackEvents&&r.callbackEvents(),window.open(a.href,"_blank"),e.abrupt("return");case 11:return t.classList.add("button--loading-download"),y(!0),t.classList.contains("button--icon")||((i=document.createElement("span")).className="text-downloading",i.innerHTML=""+Object(p.a)("Downloading..."),t.appendChild(i)),e.prev=14,e.next=17,Object(v.b)(w,{withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"}});case 17:if(u=e.sent,d=u.getPathValue("isManual"),!u.getPathValue("gi")&&d){e.next=23;break}return x(),e.abrupt("return");case 23:d&&O(t),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(14),console.error("Error validate download ",e.t0);case 29:case"end":return e.stop()}}),e,null,[[14,26]])})));return function(t,n,a){return e.apply(this,arguments)}}(),O=function(e){var t=e.dataset.captcha?e.dataset.captcha:"free",n=Object(h.c)("#captcha-download-"+t),a=r.recaptcha.widgets[r.recaptcha.nameHandler];if(n&&(a||"0"==a)){var o,c;grecaptcha.reset(a);var l=n.cloneNode(!1);t=t+"-"+(new Date).getTime(),l.id="captcha-download-"+t,null==(o=n.parentNode)||o.insertBefore(l,n.nextSibling),null==(c=n.parentNode)||c.removeChild(n),n=Object(h.c)("#captcha-download-"+t),a=null}e.dataset.captcha=t,r.uniqCaptcha=t,r.captchaElement=n||void 0,n&&!a&&"0"!=a&&(a=r.recaptcha.render(n,j,!1)),E(),grecaptcha.execute(a)},y=function(e){if(r.disableOtherDownloads){var t=Object(h.d)(r.disableOtherDownloads);t.length>0&&i()(t).call(t,(function(t){t!==r.button&&t.classList[e?"add":"remove"]("disabled")}))}},j=function(e){try{x(e),grecaptcha.reset()}catch(e){console.error("Error submit captcha download",e),grecaptcha.reset()}},x=function(e){y(!1),r.callbackEvents&&r.callbackEvents(),a&&(a.href=a.href+(e?"?token="+e:""),document.body.appendChild(a),k(!0),a.click(),a.remove())},k=function(e){var t,n,a=Object(h.c)(".text-downloading",r.button);null==a||null==(t=a.parentNode)||t.removeChild(a),null==(n=r.button)||n.classList.remove("button--loading-download"),e&&Object(h.c)("#modal-download.active")&&f.Modal.hide()},E=function(){var e=document.body;g.observe(e,{childList:!0,attributes:!1,attributeOldValue:!1,characterData:!1,characterDataOldValue:!1,subtree:!1})};function L(){return(L=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i()(t=Object(h.d)(".download-button")).call(t,(function(e){e.addEventListener("click",function(){var t=Object(u.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={disableOtherDownloads:".download-button",fileLicense:e.dataset.license?e.dataset.license:"",recaptcha:RecaptchaDownloads},m(e,n,a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.querySelector("#main .user.user--downloads")&&FEATURE_SAFE_DOWNLOAD&&function(){L.apply(this,arguments)}()}});
//# sourceMappingURL=user_downloads.e38e6f19e048e5108a113606c7ddbdde.js.map